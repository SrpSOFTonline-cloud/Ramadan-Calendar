<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto Ramadan Calendar</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="hero-box">
<div class="container">

<div class="darktheme"></div>

<div class="hero-wrapper">
<div class="ramadan-text">
<h1>Ramadan Kareem</h1>
<span>Auto Sehri & Iftar Time (API)</span>
<p>Ramadan calendar auto update every year.</p>
</div>

<div class="ramadan-time">
<h4>Today's Date</h4>
<p id="datetime"></p>
</div>
</div>

</div>
</div>

<div class="ramadan-date">
<div class="container">
<div class="date-table">

<h2>Ramadan Calendar (Auto)</h2>

<table>
<thead>
<tr>
<th>Ramadan</th>
<th>Date</th>
<th>Day</th>
<th>Sehri (Fajr)</th>
<th>Sunrise</th>
<th>Iftar (Maghrib)</th>
</tr>
</thead>

<tbody id="ramadanTable">
<tr>
<td colspan="6">Loading Ramadan data...</td>
</tr>
</tbody>

</table>
</div>
</div>
</div>

<script>
// Dark mode
var button = document.querySelector(".darktheme");
button.onclick = function(){
 button.classList.toggle("active");
 document.body.classList.toggle("dark-theme-color");
}

// Live datetime
var dt = new Date();
document.getElementById("datetime").innerHTML =
dt.toLocaleString();


// ===== AUTO RAMADAN API =====
const year = new Date().getFullYear();

// Ramadan usually starts Feb or Mar
async function loadRamadan(){
    const url =
`https://api.aladhan.com/v1/calendarByCity?city=Dhaka&country=Bangladesh&method=1&month=2&year=${year}`;

    const res = await fetch(url);
    const data = await res.json();

    const table = document.getElementById("ramadanTable");
    table.innerHTML = "";

    let count = 0;

    data.data.forEach(day => {

        if(day.date.hijri.month.en === "Ramadan"){
            count++;

            const row = `
            <tr>
                <td>${count} Ramadan</td>
                <td>${day.date.gregorian.date}</td>
                <td>${day.date.gregorian.weekday.en}</td>
                <td>${day.timings.Fajr.split(" ")[0]}</td>
                <td>${day.timings.Sunrise.split(" ")[0]}</td>
                <td>${day.timings.Maghrib.split(" ")[0]}</td>
            </tr>
            `;

            table.innerHTML += row;
        }
    });

    // যদি February তে Ramadan না থাকে তাহলে March check
    if(count === 0){
        const res2 = await fetch(
`https://api.aladhan.com/v1/calendarByCity?city=Dhaka&country=Bangladesh&method=1&month=3&year=${year}`
        );
        const data2 = await res2.json();

        data2.data.forEach(day=>{
            if(day.date.hijri.month.en === "Ramadan"){
                count++;
                table.innerHTML += `
                <tr>
                  <td>${count} Ramadan</td>
                  <td>${day.date.gregorian.date}</td>
                  <td>${day.date.gregorian.weekday.en}</td>
                  <td>${day.timings.Fajr.split(" ")[0]}</td>
                  <td>${day.timings.Sunrise.split(" ")[0]}</td>
                  <td>${day.timings.Maghrib.split(" ")[0]}</td>
                </tr>`;
            }
        });
    }
}

loadRamadan();
</script>

</body>
</html>
